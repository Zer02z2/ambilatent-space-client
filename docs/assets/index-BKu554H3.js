(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(t){if(t.ep)return;t.ep=!0;const s=o(t);fetch(t.href,s)}})();let S=0,H=100,$=100,y=255,g=0,E=0,A=null,d,u,m,h,M,p,f,v,x=!1,L=!1;function Q(e,i,o){i/=100,o/=100;let n=(t,s=(t+e/60)%6)=>o-o*i*Math.max(Math.min(s,4-s,1),0);y=Math.round(n(5)*255),g=Math.round(n(3)*255),E=Math.round(n(1)*255)}function N(e,i,o){e/=255,i/=255,o/=255;let n=Math.max(e,i,o),t=n-Math.min(e,i,o),s=t&&(n==e?(i-o)/t:n==i?2+(o-e)/t:4+(e-i)/t);t!==0&&(S=Math.round(60*(s<0?s+6:s))%360),H=Math.round((n&&t/n)*100),$=Math.round(n*100)}function _(){if(!d||!M||!p||!f||!v||!m||!h||!u)return;d.style.backgroundColor=`hsl(${S}, 100%, 50%)`,M.style.backgroundColor=`rgb(${y}, ${g}, ${E})`;const e=d.offsetWidth,i=H/100*e,o=(1-$/100)*e;u.style.left=`${i}px`,u.style.top=`${o}px`,u.style.borderColor=$>50||H<50?"black":"white";const n=m.offsetHeight,t=S/360*n;h.style.top=`${t}px`,document.activeElement!==p&&(p.value=y),document.activeElement!==f&&(f.value=g),document.activeElement!==v&&(v.value=E)}function W(){Q(S,H,$),_()}function V(){y=Math.max(0,Math.min(255,parseInt(p.value,10)||0)),g=Math.max(0,Math.min(255,parseInt(f.value,10)||0)),E=Math.max(0,Math.min(255,parseInt(v.value,10)||0)),p.value=y,f.value=g,v.value=E,N(y,g,E),_()}function P(e,i,o){e.preventDefault();const n=d.getBoundingClientRect();let t=i-n.left,s=o-n.top;const c=d.offsetWidth;t=Math.max(0,Math.min(c,t)),s=Math.max(0,Math.min(c,s)),H=Math.round(t/c*100),$=Math.round((1-s/c)*100),W()}function z(e,i){e.preventDefault();const o=m.getBoundingClientRect();let n=i-o.top;const t=m.offsetHeight;n=Math.max(0,Math.min(t,n)),S=Math.round(n/t*360),S===360&&(S=0),W()}function G(e){x&&P(e,e.clientX,e.clientY)}function X(){x&&(x=!1,document.removeEventListener("mousemove",G),document.removeEventListener("mouseup",X))}function q(e){L&&z(e,e.clientY)}function U(){L&&(L=!1,document.removeEventListener("mousemove",q),document.removeEventListener("mouseup",U))}function j(e){x&&e.touches.length===1&&(P(e,e.touches[0].clientX,e.touches[0].clientY),e.preventDefault())}function F(){x&&(x=!1,document.removeEventListener("touchmove",j),document.removeEventListener("touchend",F))}function J(e){L&&e.touches.length===1&&(z(e,e.touches[0].clientY),e.preventDefault())}function K(){L&&(L=!1,document.removeEventListener("touchmove",J),document.removeEventListener("touchend",K))}function Z(e){if(A=document.getElementById(e),!A){console.error(`RgbPicker: Element with ID "${e}" not found.`);return}A.innerHTML="",S=0,H=100,$=100,y=255,g=0,E=0,x=!1,L=!1;const i=document.createElement("div");d=document.createElement("div"),u=document.createElement("div"),m=document.createElement("div"),h=document.createElement("div");const o=document.createElement("div");M=document.createElement("div");const n=document.createElement("div"),t=document.createElement("label");p=document.createElement("input");const s=document.createElement("label");f=document.createElement("input");const c=document.createElement("label");v=document.createElement("input");const w="20px",B="45px",Y="5px",R=parseFloat(w)+parseFloat(Y)+parseFloat(B)+1+"px";i.style.display="flex",i.style.width="100%";const T=150;d.style.width=`${T}px`,d.style.height=`${T}px`,d.style.position="relative",d.style.cursor="crosshair",d.style.overflow="hidden",d.style.background="linear-gradient(to right, white, transparent), linear-gradient(to top, black, transparent)",u.style.position="absolute",u.style.width="10px",u.style.height="10px",u.style.border="2px solid white",u.style.borderRadius="50%",u.style.boxSizing="border-box",u.style.pointerEvents="none",u.style.boxShadow="0 0 0 1px rgba(0,0,0,0.5)",u.style.transform="translate(-50%, -50%)";const k=25;m.style.width=`${k}px`,m.style.height=`${T}px`,m.style.position="relative",m.style.cursor="pointer",m.style.marginLeft="10px",m.style.background="linear-gradient(to bottom, hsl(0, 100%, 50%), hsl(60, 100%, 50%), hsl(120, 100%, 50%), hsl(180, 100%, 50%), hsl(240, 100%, 50%), hsl(300, 100%, 50%), hsl(360, 100%, 50%))",h.style.position="absolute",h.style.left="0px",h.style.width="100%",h.style.height="4px",h.style.background="white",h.style.border="1px solid black",h.style.boxSizing="border-box",h.style.pointerEvents="none",h.style.transform="translateY(-50%)",o.style.marginLeft="10px",o.style.display="flex",o.style.flexDirection="column",o.style.alignItems="center",M.style.width=R,M.style.height="30px",M.style.border="1px solid #ccc",M.style.marginBottom="10px",n.style.display="flex",n.style.flexDirection="column",n.style.gap="4px",n.style.width=R;const D=(l,C,I)=>{C.style.display="flex",C.style.alignItems="center",C.style.gap=Y;const r=document.createElement("span");r.textContent=I,r.style.display="inline-block",r.style.width=w,r.style.textAlign="left",r.style.fontSize="0.85em",r.style.flexShrink="0",l.type="number",l.min="0",l.max="255",l.style.width=B,l.style.padding="3px",l.style.border="1px solid #ccc",l.style.fontSize="0.8em",l.style.textAlign="right",l.style.boxSizing="border-box",C.appendChild(r),C.appendChild(l)};D(p,t,"R:"),D(f,s,"G:"),D(v,c,"B:"),d.appendChild(u),m.appendChild(h),n.appendChild(t),n.appendChild(s),n.appendChild(c),o.appendChild(M),o.appendChild(n),i.appendChild(d),i.appendChild(m),i.appendChild(o),A.appendChild(i),d.addEventListener("mousedown",l=>{x=!0,P(l,l.clientX,l.clientY),document.addEventListener("mousemove",G),document.addEventListener("mouseup",X)}),d.addEventListener("touchstart",l=>{l.touches.length===1&&(x=!0,P(l,l.touches[0].clientX,l.touches[0].clientY),l.preventDefault(),document.addEventListener("touchmove",j,{passive:!1}),document.addEventListener("touchend",F))},{passive:!1}),m.addEventListener("mousedown",l=>{L=!0,z(l,l.clientY),document.addEventListener("mousemove",q),document.addEventListener("mouseup",U)}),m.addEventListener("touchstart",l=>{l.touches.length===1&&(L=!0,z(l,l.touches[0].clientY),l.preventDefault(),document.addEventListener("touchmove",J,{passive:!1}),document.addEventListener("touchend",K))},{passive:!1}),p.addEventListener("input",V),f.addEventListener("input",V),v.addEventListener("input",V),p.addEventListener("change",V),f.addEventListener("change",V),v.addEventListener("change",V),p.value=y,f.value=g,v.value=E,N(y,g,E),_()}function ee(){return{r:y,g,b:E}}document.addEventListener("DOMContentLoaded",()=>{Z("rgb-picker");const e=document.getElementById("global-fetch-notification");let i=null;function o(r,a){if(!e){console.error("Notification element not found!");return}i&&clearTimeout(i),e.textContent=r,e.className="fetch-notification",e.classList.add(a),requestAnimationFrame(()=>{e.classList.add("show")}),i=setTimeout(()=>{e.classList.remove("show")},1500)}const n=document.querySelectorAll(".tab");function t(){n.forEach(r=>{r.classList.remove("active")})}let s=!0;const c=document.getElementById("switch-on"),w=document.getElementById("switch-off");function B(){s?(c.classList.add("active"),w.classList.remove("active")):(c.classList.remove("active"),w.classList.add("active"))}c&&w?(c.addEventListener("click",()=>{s=!0,B(),o("sent","success"),I({on:!0})}),w.addEventListener("click",()=>{s=!1,B(),o("sent","success"),I({on:!1})}),B()):console.error("error"),document.querySelectorAll('input[type="range"].slider').forEach(r=>{const a=r.parentElement.querySelector(`span[data-controls="${r.id}"]`)||r.nextElementSibling;a?(a.textContent=r.value,r.addEventListener("input",b=>{a.textContent=b.target.value})):console.warn(`Could not find value span for slider #${r.id}`)});const R=document.getElementById("send1"),T=document.getElementById("send2"),k=document.getElementById("temperature"),D=document.getElementById("brightness"),l=document.getElementById("brightness2"),C="https://io.zongzechen.com/ambilatent";async function I(r){console.log("Sending data:",r);try{const a=await fetch(C,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(a.ok)console.log("Success: Data sent"),o("sent","success");else{const b=await a.text(),O=b.substring(0,100);console.error(`HTTP error! Status: ${a.status}`,b),o(`Error: ${a.status}${O?" - "+O:""}`,"error")}}catch(a){console.error("Fetch error:",a),o("error","error")}}R&&k&&D?R.addEventListener("click",()=>{t();const r={mode:"mode1",temperature:parseInt(k.value,10),brightness:parseInt(D.value,10),on:s};I(r)}):console.error("Could not find all elements for Mode 1 send button."),T&&l?T.addEventListener("click",()=>{t();const{r,g:a,b}=ee(),O={mode:"mode2",r,g:a,b,brightness:parseInt(l.value,10),on:s};I(O)}):console.error("Could not find all elements for Mode 2 send button."),n.forEach(r=>{r.addEventListener("click",()=>{const a=r.dataset.mode;r.classList.contains("active")?r.classList.remove("active"):(t(),r.classList.add("active"),a&&I({mode:a}))})})});
